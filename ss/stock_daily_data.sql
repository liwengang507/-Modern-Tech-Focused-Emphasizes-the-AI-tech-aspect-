-- A股金融日线数据表
-- 创建时间: 2025-09-20 22:24:50
-- 数据来源: BaoStock API

-- 创建数据表
CREATE TABLE IF NOT EXISTS `stock_daily_data`(
    `id` BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '主键ID',
    `stock_code` VARCHAR(50) COMMENT '股票代码',
    `stock_name` VARCHAR(50) COMMENT '股票名称',
    `ipo_date` DATETIME COMMENT 'IPO日期',
    -- 改为 DATETIME 类型以存储时间信息
    `listing_status` VARCHAR(50) COMMENT '上市状态',
    `stock_type` VARCHAR(50) COMMENT '股票类型',
    `trade_date` DATE COMMENT '交易日期',
    `open_price` DECIMAL(15, 4) COMMENT '开盘价',
    `high_price` DECIMAL(15, 4) COMMENT '最高价',
    `low_price` DECIMAL(15, 4) COMMENT '最低价',
    `close_price` DECIMAL(15, 4) COMMENT '收盘价',
    `prev_close_price` DECIMAL(15, 4) COMMENT '前收盘价',
    -- 修改字段名为英文
    `volume` BIGINT COMMENT '成交量',
    `amount` BIGINT COMMENT '成交额',
    `pct_change` DECIMAL(15, 4) COMMENT '涨跌幅',
    `turnover_rate` DECIMAL(15, 4) COMMENT '换手率',
    `trade_status` VARCHAR(50) COMMENT '交易状态',
    `pe_ttm` DECIMAL(15, 4) COMMENT '市盈率TTM',
    `pb_ratio` DECIMAL(15, 4) COMMENT '市净率',
    `ps_ttm` DECIMAL(15, 4) COMMENT '市销率TTM',
    `pcf_ttm` DECIMAL(15, 4) COMMENT '市现率TTM',
    `is_st` VARCHAR(50) COMMENT '是否ST',
    `net_profit` DECIMAL(20, 4) COMMENT '净利润',
    -- 改为 DECIMAL 类型
    `revenue` DECIMAL(20, 4) COMMENT '营业收入',
    -- 改为 DECIMAL 类型
    `total_assets` DECIMAL(20, 4) COMMENT '总资产',
    -- 改为 DECIMAL 类型
    `net_assets` DECIMAL(20, 4) COMMENT '净资产',
    -- 改为 DECIMAL 类型
    `eps` DECIMAL(15, 4) COMMENT '每股收益',
    `roe` DECIMAL(15, 4) COMMENT '净资产收益率',
    -- 修改字段名为英文
    `industry_code` VARCHAR(50) COMMENT '行业分类',
    `industry_name` VARCHAR(255) COMMENT '行业名称',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = 'A股金融日线数据表';
-- 创建索引
CREATE INDEX `idx_stock_code` ON
    `stock_daily_data`(`stock_code`);
CREATE INDEX `idx_trade_date` ON
    `stock_daily_data`(`trade_date`);
CREATE INDEX `idx_stock_trade_date` ON
    `stock_daily_data`(`stock_code`, `trade_date`);
CREATE INDEX `idx_ipo_date` ON
    `stock_daily_data`(`ipo_date`);
    -- 插入数据示例（前5条记录）
INSERT INTO `stock_daily_data`
VALUES(
    NULL,
    'sh.600653',
    '申华控股',
    '1990-12-19 00:00:00',
    1,
    1,
    '2020-01-02',
    2.05,
    2.08,
    2.05,
    2.07,
    2.04,
    9939739,
    20524339,
    1.4706,
    0.5107,
    1,
    9.4988,
    1.8959,
    0.5453,
    9.1623,
    0,
    -185248679.9,
    4861911882.35,
    NULL,
    NULL,
    -0.1021,
    -0.2233,
    'F52',
    '零售业',
    NOW(), NOW()),(
        NULL,
        'sh.600653',
        '申华控股',
        '1990-12-19 00:00:00',
        1,
        1,
        '2020-01-03',
        2.08,
        2.08,
        2.06,
        2.07,
        2.07,
        7251906,
        15002713,
        0.0,
        0.3726,
        1,
        9.4988,
        1.8959,
        0.5453,
        9.1623,
        0,
        -185248679.9,
        4861911882.35,
        NULL,
        NULL,
        -0.1021,
        -0.2233,
        'F52',
        '零售业',
        NOW(), NOW()),(
            NULL,
            'sh.600653',
            '申华控股',
            '1990-12-19 00:00:00',
            1,
            1,
            '2020-01-06',
            2.06,
            2.09,
            2.05,
            2.07,
            2.07,
            11326987,
            23452535,
            0.0,
            0.5820,
            1,
            9.4988,
            1.8959,
            0.5453,
            9.1623,
            0,
            -185248679.9,
            4861911882.35,
            NULL,
            NULL,
            -0.1021,
            -0.2233,
            'F52',
            '零售业',
            NOW(), NOW()),(
                NULL,
                'sh.600653',
                '申华控股',
                '1990-12-19 00:00:00',
                1,
                1,
                '2020-01-07',
                2.07,
                2.10,
                2.06,
                2.10,
                2.07,
                14792360,
                30886960,
                1.4493,
                0.7600,
                1,
                9.6365,
                1.9233,
                0.5532,
                9.2951,
                0,
                -185248679.9,
                4861911882.35,
                NULL,
                NULL,
                -0.1021,
                -0.2233,
                'F52',
                '零售业',
                NOW(), NOW()),(
                    NULL,
                    'sh.600653',
                    '申华控股',
                    '1990-12-19 00:00:00',
                    1,
                    1,
                    '2020-01-08',
                    2.09,
                    2.14,
                    2.08,
                    2.09,
                    2.10,
                    17382282,
                    36709428,
                    -0.4762,
                    0.8931,
                    1,
                    9.5906,
                    1.9142,
                    0.5506,
                    9.2509,
                    0,
                    -185248679.9,
                    4861911882.35,
                    NULL,
                    NULL,
                    -0.1021,
                    -0.2233,
                    'F52',
                    '零售业',
                    NOW(), NOW());